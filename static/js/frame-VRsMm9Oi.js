import{d as I,q as f,C as R,u,L as g,A as k,j as x,w as S,c as T,o as L,e as P,Y as b,_ as B}from"./index-DZ0NoJ7K.js";const C={class:"frame","element-loading-text":"加载中..."},D=["src"],E=I({name:"LayFrame",__name:"frame",props:{frameInfo:{}},setup(h){var v,_;const t=h,r=f(!0),n=R(),c=f(""),m=f(null),o=f(null);(v=u(n.meta))!=null&&v.frameSrc&&(c.value=(_=u(n.meta))==null?void 0:_.frameSrc);function d(){o.value!==null&&(clearTimeout(o.value),o.value=null)}function s(){r.value=!1,d()}function p(){b(()=>{const e=u(m);if(!e)return;const a=e;a.attachEvent?a.attachEvent("onload",s):e.onload=s})}let i=!1;return g(()=>n.fullPath,e=>{var a,l;if(n.name==="Redirect"&&((a=t.frameInfo)!=null&&a.fullPath)&&e.includes(t.frameInfo.fullPath)){i=!0,r.value=!0;return}if(((l=t.frameInfo)==null?void 0:l.fullPath)===e&&i){r.value=!0,d();const w=new URL(t.frameInfo.frameSrc,window.location.origin).search?"&":"?";c.value=`${t.frameInfo.frameSrc}${w}t=${Date.now()}`,o.value=window.setTimeout(()=>{r.value&&s()},1500),i=!1}},{immediate:!0}),k(()=>{p()}),(e,a)=>{const l=x("loading");return S((L(),T("div",C,[P("iframe",{ref_key:"frameRef",ref:m,src:c.value,class:"frame-iframe"},null,8,D)])),[[l,r.value]])}}}),y=B(E,[["__scopeId","data-v-409211b1"]]);export{y as default};
