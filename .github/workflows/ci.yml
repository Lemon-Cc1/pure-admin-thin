# 工作流的名称，会显示在GitHub的Actions标签页中
name: CI Pipeline

# 定义触发条件：在向main分支推送代码或发起Pull Request时触发
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

# 定义要执行的任务
jobs:
  # 任务名，例如“构建与测试”
  build-and-test:
    # 指定任务运行的环境，最常用的是最新的Ubuntu系统
    runs-on: ubuntu-latest

    # 定义任务的具体步骤
    steps:
      # 步骤1：检出代码。使用官方Action将仓库代码拉取到虚拟环境中。
      - name: Checkout code
        uses: actions/checkout@v4

      # 步骤2：配置运行环境。例如，设置Node.js环境。
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18" # 指定你项目所需的Node.js版本
          cache: "npm" # 缓存依赖，加速后续流程

      # 步骤3：安装项目依赖
      - name: Install dependencies
        run: npm install

      # 步骤4：运行代码检查（Lint）
      - name: Run Linter
        run: npm run lint

      # 步骤5：运行自动化测试
      - name: Run Tests
        run: npm test

      # 步骤6：构建项目（如果需要生成部署产物）
      - name: Build Project
        run: npm run build
